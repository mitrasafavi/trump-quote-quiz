<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Real or Fake? Quotes Quiz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, Arial, sans-serif; background:#f7f7f7; margin:0; display:flex; flex-direction:column; align-items:center; }
    header { background:#002868; color:#fff; width:100%; padding:1rem; text-align:center; }
    #quiz { max-width:760px; margin:2rem; padding:1.25rem; background:#fff; border-radius:12px; box-shadow:0 6px 24px rgba(0,0,0,.08); }
    .quote { font-size:1.25rem; margin-bottom:1rem; line-height:1.45; }
    .btn { padding:.65rem 1.25rem; margin:.25rem; font-size:1rem; border:none; border-radius:8px; cursor:pointer }
    .real { background:#2e7d32; color:#fff; }
    .fake { background:#c62828; color:#fff; }
    .next { background:#002868; color:#fff; }
    #result { margin-top:.75rem; font-weight:600; min-height:1.5rem; }
    #score { margin-top:1rem; font-size:1.1rem; }
    #footer { margin-top:1rem; font-size:.9rem; color:#555; }
    #loading { font-size:1rem; color:#333; }
  </style>
</head>
<body>
<header><h1>Real or Fake? Quotes Quiz</h1></header>

<div id="quiz">
  <div id="loading">Loading quotes…</div>
  <div id="question" class="quote" style="display:none;"></div>
  <div>
    <button class="btn real" id="realBtn" style="display:none;">Real</button>
    <button class="btn fake" id="fakeBtn" style="display:none;">Fake</button>
  </div>
  <div id="result"></div>
  <button class="btn" id="showFullBtn" style="display:none;">Show full quote</button>
  <button class="btn next" id="nextBtn" style="display:none;">Next</button>
  <div id="score"></div>
  <div id="footer"></div>
</div>

<!-- version bump to force refresh -->
<script src="quotes.js?v=3"></script>

<script>
  // QUOTES provided by quotes.js: { text, long, real, who }
  let pool = Array.isArray(window.QUOTES) ? window.QUOTES.slice() : [];
  let gameQuotes = [];
  let current = 0;
  let score = 0;

  function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]] } return arr }

  function startGame() {
    if (!pool.length) {
      document.getElementById('loading').textContent = "No quotes loaded.";
      return;
    }
    document.getElementById('loading').style.display = 'none';
    document.getElementById('realBtn').style.display = 'inline-block';
    document.getElementById('fakeBtn').style.display = 'inline-block';
    gameQuotes = shuffle(pool.slice()).slice(0, 5);
    current = 0;
    score = 0;
    showQuestion();
    document.getElementById('score').textContent = `Score: 0/0`;
  }

  function showQuestion() {
    const q = gameQuotes[current];
    const qEl = document.getElementById('question');
    qEl.style.display = 'block';
    qEl.textContent = q.text + (q.who ? ` — ${q.who}` : '');
    document.getElementById('result').textContent = "";
    document.getElementById('nextBtn').style.display = 'none';
    document.getElementById('showFullBtn').style.display = 'none';
    document.getElementById('footer').textContent = `Question ${current+1} of ${gameQuotes.length}`;
  }

  function checkAnswer(guess) {
    const q = gameQuotes[current];
    const correct = !!q.real;
    const res = document.getElementById('result');

    if (guess === correct) { res.textContent = "✅ Correct!"; score++; }
    else { res.textContent = "❌ Wrong! It was " + (correct ? "Real." : "Fake."); }

    document.getElementById('nextBtn').style.display = 'inline-block';
    document.getElementById('score').textContent = `Score: ${score}/${current+1}`;
    if (q.long && q.long.trim().length > 0) {
      document.getElementById('showFullBtn').style.display = 'inline-block';
    }
  }

  function revealFull() {
    const q = gameQuotes[current];
    if (q.long) {
      const question = document.getElementById('question');
      question.textContent = q.long + (q.who ? ` — ${q.who}` : '');
      document.getElementById('showFullBtn').style.display = 'none';
    }
  }

  function nextQuestion() {
    current++;
    if (current < gameQuotes.length) {
      showQuestion();
    } else {
      document.getElementById('quiz').innerHTML =
        `<h2>Game Over!</h2>
         <p>Your final score: ${score}/${gameQuotes.length}</p>
         <button class="btn next" onclick="location.reload()">Play Again</button>`;
    }
  }

  document.getElementById('realBtn').addEventListener('click', () => checkAnswer(true));
  document.getElementById('fakeBtn').addEventListener('click', () => checkAnswer(false));
  document.getElementById('nextBtn').addEventListener('click', nextQuestion);
  document.getElementById('showFullBtn').addEventListener('click', revealFull);

  window.addEventListener('load', startGame);
</script>
</body>
</html>
